// Generated by CoffeeScript 1.9.3
var $, RecentSupportersItem;

$ = jQuery;

RecentSupportersItem = (function() {
  function RecentSupportersItem(settings, element) {
    this.settings = settings;
    this.fn = element.recentSupporters(this.settings);
  }

  RecentSupportersItem.prototype.poll = function() {
    var callback;
    callback = (function(_this) {
      return function(data) {
        data = data.recent_supporters[_this.settings.field_name][_this.settings.delta];
        _this.fn.update({
          supporters: data
        });
      };
    })(this);
    return Drupal.behaviors.polling.registry.registerEntity(this.settings.entity_type, this.settings.entity_id, this.settings.id, callback);
  };

  return RecentSupportersItem;

})();

RecentSupportersItem.fromElement = function($element) {
  var id, settings;
  id = $element.attr('id');
  if (!id) {
    return false;
  }
  settings = Drupal.settings.recentSupporters.blocks[id];
  settings['id'] = id;
  return new RecentSupportersItem(settings, $element);
};

Drupal.behaviors.recent_supporters = {};

Drupal.behaviors.recent_supporters.attach = function(context, settings) {
  return $('.recent-supporters-wrapper', context).each(function() {
    var item;
    item = RecentSupportersItem.fromElement($(this));
    if (item) {
      return item.poll();
    }
  });
};
